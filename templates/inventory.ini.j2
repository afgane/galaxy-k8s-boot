# This inventory file is automatically generated by Ansible.

[localhost]
127.0.0.1 ansible_connection=local ansible_python_interpreter="/usr/bin/python3"

[controllers]
{{ name }} ansible_ssh_host={{ ip }}

[agents]
{% if workers is defined %}
{% for worker_info in workers.split(' ') %}
{% set worker = worker_info.split(':') -%}
{{ worker[0] }} ansible_ssh_host={{ worker[1] -}}
{% endfor %}
{% endif %}

[nodes:children]
controllers
agents

[rke_cluster:children]
controllers
agents

# Groups needed for the k3s playbook
[master:children]
controllers

[node:children]
agents

[k3s_cluster:children]
controllers
agents

[all:vars]
ansible_ssh_port=22
ansible_user='{{ user }}'
ansible_ssh_extra_args='-o StrictHostKeyChecking=no'
ansible_ssh_private_key_file={{ key }}
ansible_python_interpreter="/usr/bin/python3"

k3s_version='v{{ version }}+k3s1'

#ansible_user='{{ user }}'
systemd_dir=/etc/systemd/system
master_ip='{{ ip }}'
extra_server_args="--tls-san {{ ip }} --disable traefik --v=4"
extra_agent_args=""

